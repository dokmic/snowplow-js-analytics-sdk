!function(e,r){for(var t in r)e[t]=r[t]}(exports,function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=2)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=new RegExp(".+:([a-zA-Z0-9_.]+)/([a-zA-Z0-9_-]+)/[^/]+/(.*)");function i(e,r){var t=r.match(n);if(!t)throw new TypeError("Wrong schema format.");return[e,t[1].replace(/\./g,"_").toLowerCase(),t[2].replace(/([^A-Z_])([A-Z])/g,"$1_$2").toLowerCase(),t[3].split("-")[0]].join("_")}r.Contexts=function(e,r){var t=JSON.parse(r).data.reduce(function(e,r){var t=i("contexts",r.schema);return e[t]?e[t].push(r.data):e[t]=[r.data],e},{});return Object.keys(t).map(function(e){return Object({key:e,value:t[e]})})},r.Unstruct=function(e,r){var t=JSON.parse(r).data;if(!t.hasOwnProperty("data"))throw new TypeError("Could not extract inner data field from unstructured event.");return[{key:i("unstruct_event",t.schema),value:t.data}]},r.String=function(e,r){return[{key:e,value:r}]},r.Integer=function(e,r){var t=Number.parseInt(r);if(Number.isNaN(t))throw new TypeError("Invalid value for field '"+e+"'.");return[{key:e,value:t}]},r.Double=function(e,r){var t=Number.parseFloat(r);if(Number.isNaN(t))throw new TypeError("Invalid value for field '"+e+"'.");return[{key:e,value:t}]},r.Boolean=function(e,r){if("0"!==r&&"1"!==r)throw new TypeError("Invalid value for field '"+e+"'.");return[{key:e,value:"1"===r}]},r.Timestamp=function(e,r){return[{key:e,value:r.replace(" ","T")+"Z"}]}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0);r.LATITUDE_INDEX=22,r.LONGITUDE_INDEX=23,r.EVENT_STRUCTURE={app_id:n.String,platform:n.String,etl_tstamp:n.Timestamp,collector_tstamp:n.Timestamp,dvce_created_tstamp:n.Timestamp,event:n.String,event_id:n.String,txn_id:n.Integer,name_tracker:n.String,v_tracker:n.String,v_collector:n.String,v_etl:n.String,user_id:n.String,user_ipaddress:n.String,user_fingerprint:n.String,domain_userid:n.String,domain_sessionidx:n.Integer,network_userid:n.String,geo_country:n.String,geo_region:n.String,geo_city:n.String,geo_zipcode:n.String,geo_latitude:n.Double,geo_longitude:n.Double,geo_region_name:n.String,ip_isp:n.String,ip_organization:n.String,ip_domain:n.String,ip_netspeed:n.String,page_url:n.String,page_title:n.String,page_referrer:n.String,page_urlscheme:n.String,page_urlhost:n.String,page_urlport:n.Integer,page_urlpath:n.String,page_urlquery:n.String,page_urlfragment:n.String,refr_urlscheme:n.String,refr_urlhost:n.String,refr_urlport:n.Integer,refr_urlpath:n.String,refr_urlquery:n.String,refr_urlfragment:n.String,refr_medium:n.String,refr_source:n.String,refr_term:n.String,mkt_medium:n.String,mkt_source:n.String,mkt_term:n.String,mkt_content:n.String,mkt_campaign:n.String,contexts:n.Contexts,se_category:n.String,se_action:n.String,se_label:n.String,se_property:n.String,se_value:n.String,unstruct_event:n.Unstruct,tr_orderid:n.String,tr_affiliation:n.String,tr_total:n.Double,tr_tax:n.Double,tr_shipping:n.Double,tr_city:n.String,tr_state:n.String,tr_country:n.String,ti_orderid:n.String,ti_sku:n.String,ti_name:n.String,ti_category:n.String,ti_price:n.Double,ti_quantity:n.Integer,pp_xoffset_min:n.Integer,pp_xoffset_max:n.Integer,pp_yoffset_min:n.Integer,pp_yoffset_max:n.Integer,useragent:n.String,br_name:n.String,br_family:n.String,br_version:n.String,br_type:n.String,br_renderengine:n.String,br_lang:n.String,br_features_pdf:n.Boolean,br_features_flash:n.Boolean,br_features_java:n.Boolean,br_features_director:n.Boolean,br_features_quicktime:n.Boolean,br_features_realplayer:n.Boolean,br_features_windowsmedia:n.Boolean,br_features_gears:n.Boolean,br_features_silverlight:n.Boolean,br_cookies:n.Boolean,br_colordepth:n.String,br_viewwidth:n.Integer,br_viewheight:n.Integer,os_name:n.String,os_family:n.String,os_manufacturer:n.String,os_timezone:n.String,dvce_type:n.String,dvce_ismobile:n.Boolean,dvce_screenwidth:n.Integer,dvce_screenheight:n.Integer,doc_charset:n.String,doc_width:n.Integer,doc_height:n.Integer,tr_currency:n.String,tr_total_base:n.Double,tr_tax_base:n.Double,tr_shipping_base:n.Double,ti_currency:n.String,ti_price_base:n.Double,base_currency:n.String,geo_timezone:n.String,mkt_clickid:n.String,mkt_network:n.String,etl_tags:n.String,dvce_sent_tstamp:n.Timestamp,refr_domain_userid:n.String,refr_device_tstamp:n.Timestamp,derived_contexts:n.Contexts,domain_sessionid:n.String,derived_tstamp:n.Timestamp,event_vendor:n.String,event_name:n.String,event_format:n.String,event_version:n.String,event_fingerprint:n.String,true_tstamp:n.Timestamp}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1);r.transform=function(e){return function(e){if(e.length!==Object.keys(n.EVENT_STRUCTURE).length)throw new TypeError("Wrong event fields number.");var r=[],t=Object.keys(n.EVENT_STRUCTURE).reduce(function(t,i,o){if(e[o])try{t.push.apply(t,n.EVENT_STRUCTURE[i](i,e[o]))}catch(e){r.push(e.message)}return t},[]).reduce(function(e,r){return e[r.key]=r.value,e},{});if(r.length)throw new TypeError(r.join("\n"));return e[n.LATITUDE_INDEX]&&e[n.LONGITUDE_INDEX]&&(t.geo_location=e[n.LATITUDE_INDEX]+","+e[n.LONGITUDE_INDEX]),t}(e.split("\t"))}}]));